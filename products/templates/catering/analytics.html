{% extends "base/base_nav_footer.html" %}
{% load static %}
{% block content %}

<div class="container-fluid">    
    <div class="row">
        <div class="col-12 col-xl-5">            
            <canvas id="myChart1" width="400" height="300"></canvas>
        </div>
        <div class="col-12 col-xl-5">
            <canvas id="myChart2" width="400" height="300"></canvas>
        </div>        
        <div class="col-md-2">
            <select class="year_select" id="cat-sold">
                <option value="2018">2018</option>
            </select><br><br>
            <select class="month_select" id="cat-sold">
                <option value="7">Julio</option>
            </select><br><br>
            <select class="category_select" id="cat-sold">
                <option value="select">General</option>
            </select>            
        </div>
    </div>
</div>

{% endblock content %} 
{% block javascript %}

<script src="{% static 'js/Chart.bundle.min.js' %}" ></script>
<script type="text/javascript">
    
    var ctx1 = document.getElementById("myChart1");
    var myChart1 = new Chart(ctx1, {
        type: 'horizontalBar',
        data: {
            labels: ['Chilaquiles Rojos','Jugo de Naranja','Cafe','Jugo de Toronja','Suizo','Choriqueso','Champiñones'],
            datasets: [
                {
                    label: '# de Unidades Vendidas',
                    data: [30,20,30,40,20,10,23],
                    backgroundColor: [
                      'rgba(26, 188, 156,1.0)',
                      'rgba(46, 204, 113, 1.0)',
                      'rgba(52, 152, 219,1.0)',
                      'rgba(52, 73, 94,1.0)',
                      'rgba(241, 196, 15,1.0)',
                      'rgba(230, 126, 34,1.0)',
                      'rgba(231, 76, 60,1.0)',
                      ],
                    borderColor: [
                      'rgba(26, 188, 156,1.0)',
                      'rgba(46, 204, 113, 1.0)',
                      'rgba(52, 152, 219,1.0)',
                      'rgba(52, 73, 94,1.0)',
                      'rgba(241, 196, 15,1.0)',
                      'rgba(230, 126, 34,1.0)',
                      'rgba(231, 76, 60,1.0)',
                      ],
                    
                    
                },        
            ]
        },
    });    

    var ctx2 = document.getElementById("myChart2");
    var myChart2 = new Chart(ctx2, {
         type: 'line',
         data: {
            labels: [1,2,3,4,5,6,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,25,27,28,29,30,31],
            datasets: [
                {
                    borderWidth: 2,
                    borderColor: 'rgba(26, 188, 156,1.0)',
                    pointRadius: 4,
                    label: "Chilaquiles Rojas",
                    data: [10,20,30,10,10,20,23,123,41,12,31,4,31,52,2,3,46,4,7,3,34,43,53,4,12,85,96,64,3,34,12,30],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(46, 204, 113, 1.0)',
                    pointRadius: 4,
                    label: "Jugo de Naranja",
                    data: [10,24,12,54,65,34,76,34,65,12,43,23,23,14,45,42,42,12,32,32,1,23,13,1,2,12,3,45,3,11,3,12],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(52, 152, 219,1.0)',
                    pointRadius: 4,
                    label: "Cafe",
                    data: [31,41,42,53,65,78,57,78,13,12,13,14,35,45,56,76,87,5,67,56,45,34,54,65,67,78,98,90,32],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(52, 73, 94,1.0)',
                    pointRadius: 4,
                    label: "Jugo de Toronja",
                    data: [1,4,5,6,7,8,34,5,2,3,4,56,3,4,5,67,8,9,1,23,24,46,56,47,56,78,67,56,32,12],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(241, 196, 15,1.0)',
                    pointRadius: 4,
                    label: "Suizo",
                    data: [32,45,87,12,76,98,23,45,76,23,54,32,54,65,87,34,65,34,65,34,54,23,54,87,12,19,1,2,4,5],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(230, 126, 34,1.0)',
                    pointRadius: 4,
                    label: "Choriqueso",
                    data: [10,20,30,10,10,20,23,123,41,12,31,4,31,52,2,3,46,4,7,3,34,43,53,4,12,85,96,64,3,34,12,30],
                    fill: false,
                    hidden:true,
                },
                {
                    borderWidth: 2,
                    borderColor: 'rgba(231, 76, 60,1.0)',
                    pointRadius: 4,
                    label: "Champiñones",
                    data: [1,2,45,34,12,54,76,23,65,34,65,12,54,12,54,12,76,45,87,45,32,54,23,65,13,19,18,18,27,37,47,12],
                    fill: false,
                },
            ],
        },        
    });        

    /**
     * Axuxiliar function to show random data list
     */
    function get_aux_data(elements){
      let aux_data = [];
      for(let j = 0; j < elements; j++) {
        aux_data.push(parseInt(Math.random()*100));
      }
      return aux_data;
    }

</script>
// <script type="text/javascript" charset="utf-8" >

//     var sales_data = JSON.parse('{{ sales_data | safe }}');  
//     var sales_data_by_date = JSON.parse('{{ sales_data_by_date | safe }}');  
//     let year = "{{today.year}}"
//     let month = "{{today.month}}"
//     let day = "{{today.day}}"
//     let category = "select"

//     $(".year_select").val(year);
//     $(".month_select").val(month);
    
//     function get_cookie(name) {
//         let cookie_value = null;
//         if (document.cookie && document.cookie !== '') {
//             let cookies = document.cookie.split(';');
//             for (let i = 0; i < cookies.length; i++) {
//                 let cookie = jQuery.trim(cookies[i]);
//                 if (cookie.substring(0, name.length + 1) === (name + '=')) {
//                     cookie_value = decodeURIComponent(cookie.substring(name.length + 1));
//                     break;
//                 }
//             }
//         }
//         return cookie_value;/**/
//     }
    
//     function random_rgba() {
//         var o = Math.round, r = Math.random, s = 255;
//         return 'rgba(' + o(r() * s) + ',' + o(r() * s) + ',' + o(r() * s) + ',' + r().toFixed(1) + ')';
//     }

//     function get_colors(sales_data) {
//         let color_list = [];
//         let count = 0;
//         while (count < sales_data.length) {
//             color_list.push(random_rgba());
//             count++;
//         }
//         return color_list;
//     }

//     function get_new_data() {
//         var csrf_token = get_cookie('csrftoken');

//         $.ajax({
//             url: '{% url "products:warehouse_analytics" %}',
//             type: 'POST',
//             data: {
//                 'type': 'load_date',
//                 'year': year,
//                 'month': month,
//                 'category': category,
//                 csrfmiddlewaretoken: csrf_token
//             },
//             datatype: "html",
//             success: function (result) {            
//                 data = JSON.parse(result['sales_data']);       
//                 colors = get_colors(data.names);

//                 myChart1.destroy()
//                 myChart1 = new Chart(ctx1, {
//                     type: 'horizontalBar',
//                     data: {
//                         labels: data.names,
//                         datasets: getDataset(data,colors)
//                     },     
//                 });                

//                 data_by_date = JSON.parse(result['json_sales_data_by_date']);
//                 myChart2.destroy()
//                 myChart2 = new Chart(ctx2, {
//                     type: 'line',
//                     data: {
//                         labels: getLabels(data_by_date),
//                         datasets: getDatasets(data_by_date,colors),
//                     },                    
//                 });   
//             }
//         });
//     }

//     var colors = get_colors(sales_data.names)

//     var ctx1 = document.getElementById("myChart1");
//     var myChart1 = new Chart(ctx1, {
//         type: 'horizontalBar',
//         data: {
//             labels: sales_data.names,
//             datasets: getDataset(sales_data,colors)
//         },        
//     });
//     var ctx2 = document.getElementById("myChart2");
//     var myChart2 = new Chart(ctx2, {
//         type: 'line',
//         data: {
//             labels: getLabels(sales_data_by_date),
//             datasets: getDatasets(sales_data_by_date,colors),
//         },        
//     });    

//     $(".year_select").on('change', function () {
//         year = $(this).val();
//         get_new_data()
//     });

//     $(".month_select").on('change', function () {
//         month = $(this).val();
//         get_new_data()
//     });

//     $(".category_select").on('change', function () {
//         category = $(this).val();
//         console.log(category)
//         get_new_data()
//     });

//     function getDataset(data,colors){
//         dataset = [];
//         obj = {
//             label: '# de Ventas',
//             data: data.tick_sales,
//             borderColor: colors,
//             backgroundColor: colors,
//             borderWidth: 1,            
//         }
//         dataset.push(obj)
//         return dataset
//     }

//     function getDatasets(data,colors){
//         datasets = [];
//         for(x=0;x<data.final_name.length;x++){
//             object = {
//                 borderWidth: 2,
//                 borderColor: colors[x],
//                 pointRadius: 4,
//                 label: data.final_name[x],
//                 data: data.final_dates[x],
//                 fill: false,
//                 hidden:true,
//             };
//             datasets.push(object);
//         }
//         return datasets;
//     }

//     function getLabels(data){
//         console.log(data);
//         dates = []
//         try{
//             for (x = 1; x <= data.final_dates[0].length; x++) {
//                 dates.push(x.toString());
//             }
//             return dates
//         }catch(TypeError){
//             console.log("No hay Ventas" + TypeError)
//         }
//     }
    
// </script>

{% endblock javascript %}